
## 系统设计需要考虑的几个问题

* 1、网络协议选择，各种协议适合的场景

    * tcp

        特性：基于连接流式协议、可靠性、耗时、建/断/管理连接、点对点一对一

        场景：对数据准确性要求高，速度可以相对较慢的

        应用：文件传输、邮件

        上层协议：HTTP
        
    * udp

        特性：无连接报文协议、不保证可靠性、传输效率高、支持一对一、一对多、多对多

        场景：网络负担重但对响应速度要求高的场景,对数据安全性无特殊要求

        应用：实时视频会议

        上层协议：KCP QUIC DNS
    * http

        特性：基于tcp、应用广泛、传输效率低(网络有效载荷)
    * 基于tcp的自定义协议

        特性：定制数据格式


* 2、数据交互方式选择，适合的场景

    评估标准：传输效率(有效载荷)、可读性

    * 文本协议json/xml

    * 二进制pb

* 3、[服务编程模型选择](https://hitzhangjie.gitbook.io/libmill/basics/server-programming-model#xuan-ze-he-kuo-de-bian-cheng-mo-xing)，业务类型

        多线程得以发挥其并发处理的优势的前提是，线程之间能交替执行，在某个线程实体所依赖的资源暂时不满足时，让度出CPU给其他可以执行的线程实体继续执行。这样在宏观上，多线程在资源有限时可以实现更大程度地并发处理，才可以发挥其优势。

    * 计算密集型任务

        多进程 多线程
    * IO密集型任务

        非阻塞 + IO复用 + 多线程
    * 混合型任务

        多线程

* 4、存储方案选择

    * mysql

        关系型数据库    -   基于磁盘、检索时涉及磁盘I/O、并发增大性能降低

    * redis

        KV数据库    -   基于内存、热点数据、高并发场景、适合做缓存

    * mongodb

        文档数据库
## 接口设计

* [API接口签名校验](https://blog.mimvp.com/article/37824.html)

    * 给调用方分配access_key security_key
    * 调用方调用API时对请求参数进行签名验证，规则为选择某些参数按照一定规则计算摘要，access_key参与签名，timestamp参与签名(防止重放攻击)，计算出sign后添加到请求参数中
    * 接口提供方，查询access_key对应的security_key按照相关的规则计算sign，对比自己计算得出的与参数中的sign是否一致，另外，也要判断当前时间距离参数时间戳的差值(防止重放)

* [API认证、授权和凭证概览](https://juejin.cn/post/6844903807839649806#heading-2)

## 如何编写一个网络框架
